
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>구글 폼 자동 생성기 (API 설정 포함)</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="https://accounts.google.com/gsi/client"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- 헤더 -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">
                <i class="fas fa-magic text-purple-600"></i>
                구글 폼 자동 생성기
            </h1>
            <p class="text-gray-600">질문을 입력하면 자동으로 구글 폼을 생성해드립니다</p>
        </div>

        <!-- API 설정 패널 -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center">
                <i class="fas fa-cog text-blue-600 mr-2"></i>
                API 설정
            </h2>
            
            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Google Client ID
                    </label>
                    <input type="text" id="clientId" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                           placeholder="Google OAuth Client ID를 입력하세요">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Google API Key
                    </label>
                    <input type="password" id="apiKey" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                           placeholder="Google API Key를 입력하세요">
                </div>
            </div>
            
            <div class="mt-4 flex gap-2">
                <button onclick="saveApiSettings()" 
                        class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition duration-200">
                    <i class="fas fa-save mr-2"></i>설정 저장
                </button>
                <button onclick="loadApiSettings()" 
                        class="bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition duration-200">
                    <i class="fas fa-download mr-2"></i>설정 불러오기
                </button>
                <button onclick="testConnection()" 
                        class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition duration-200">
                    <i class="fas fa-plug mr-2"></i>연결 테스트
                </button>
            </div>
            
            <div id="connectionStatus" class="mt-3 text-sm"></div>
        </div>

        <!-- 로그인 섹션 -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center">
                <i class="fas fa-user text-green-600 mr-2"></i>
                Google 계정 로그인
            </h2>
            
            <div id="loginSection">
                <button onclick="signIn()" 
                        class="bg-red-600 text-white px-6 py-3 rounded-md hover:bg-red-700 transition duration-200 text-lg">
                    <i class="fab fa-google mr-2"></i>Google로 로그인
                </button>
            </div>
            
            <div id="userInfo" class="hidden">
                <div class="flex items-center gap-4">
                    <img id="userPhoto" class="w-12 h-12 rounded-full" alt="User Photo">
                    <div>
                        <p class="font-semibold" id="userName"></p>
                        <p class="text-gray-600" id="userEmail"></p>
                    </div>
                    <button onclick="signOut()" 
                            class="ml-auto bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700">
                        로그아웃
                    </button>
                </div>
            </div>
        </div>

        <!-- 질문 입력 섹션 -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center">
                <i class="fas fa-question-circle text-purple-600 mr-2"></i>
                폼 생성
            </h2>
            
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    폼 제목
                </label>
                <input type="text" id="formTitle" 
                       class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"
                       placeholder="설문조사 제목을 입력하세요"
                       value="새로운 설문조사">
            </div>
            
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    폼 설명
                </label>
                <textarea id="formDescription" 
                          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 h-20"
                          placeholder="설문조사에 대한 설명을 입력하세요"></textarea>
            </div>
            
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    질문 목록 (한 줄에 하나씩)
                </label>
                <textarea id="questions" 
                          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 h-40"
                          placeholder="예시:&#10;이름을 입력해주세요&#10;나이를 선택해주세요&#10;만족도를 평가해주세요&#10;추가 의견이 있다면 작성해주세요"></textarea>
            </div>
            
            <button onclick="generateForm()" 
                    class="w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 rounded-md hover:from-purple-700 hover:to-blue-700 transition duration-200 text-lg font-semibold">
                <i class="fas fa-magic mr-2"></i>구글 폼 생성하기
            </button>
        </div>

        <!-- 로딩 및 결과 섹션 -->
        <div id="loadingSection" class="hidden bg-white rounded-lg shadow-lg p-6 mb-6">
            <div class="text-center">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"></div>
                <p class="text-gray-600">구글 폼을 생성하고 있습니다...</p>
            </div>
        </div>

        <div id="resultSection" class="hidden bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4 flex items-center">
                <i class="fas fa-check-circle text-green-600 mr-2"></i>
                생성 완료!
            </h2>
            
            <div class="bg-green-50 border border-green-200 rounded-md p-4 mb-4">
                <p class="text-green-800 mb-2">구글 폼이 성공적으로 생성되었습니다!</p>
                <div class="flex gap-2">
                    <a id="formLink" href="#" target="_blank" 
                       class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition duration-200">
                        <i class="fas fa-external-link-alt mr-2"></i>폼 열기
                    </a>
                    <button onclick="copyLink()" 
                            class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition duration-200">
                        <i class="fas fa-copy mr-2"></i>링크 복사
                    </button>
                </div>
            </div>
            
            <div id="formPreview"></div>
        </div>

        <!-- 오류 메시지 -->
        <div id="errorSection" class="hidden bg-red-50 border border-red-200 rounded-md p-4 mb-6">
            <p class="text-red-800" id="errorMessage"></p>
        </div>
    </div>

    <script>
        let isSignedIn = false;
        let currentUser = null;

        // API 설정 저장
        function saveApiSettings() {
            const clientId = document.getElementById('clientId').value;
            const apiKey = document.getElementById('apiKey').value;
            
            if (!clientId || !apiKey) {
                showError('Client ID와 API Key를 모두 입력해주세요.');
                return;
            }
            
            localStorage.setItem('google_client_id', clientId);
            localStorage.setItem('google_api_key', apiKey);
            showSuccess('API 설정이 저장되었습니다.');
        }

        // API 설정 불러오기
        function loadApiSettings() {
            const clientId = localStorage.getItem('google_client_id');
            const apiKey = localStorage.getItem('google_api_key');
            
            if (clientId) document.getElementById('clientId').value = clientId;
            if (apiKey) document.getElementById('apiKey').value = apiKey;
            
            if (clientId && apiKey) {
                showSuccess('저장된 API 설정을 불러왔습니다.');
            } else {
                showError('저장된 API 설정이 없습니다.');
            }
        }

        // 연결 테스트
        async function testConnection() {
            const clientId = document.getElementById('clientId').value;
            const apiKey = document.getElementById('apiKey').value;
            
            if (!clientId || !apiKey) {
                showError('Client ID와 API Key를 먼저 입력해주세요.');
                return;
            }
            
            try {
                await gapi.load('auth2', function() {
                    gapi.auth2.init({
                        client_id: clientId
                    });
                });
                
                showSuccess('API 연결이 정상적으로 작동합니다!');
            } catch (error) {
                showError('API 연결에 실패했습니다: ' + error.message);
            }
        }

        // Google 로그인
        async function signIn() {
            const clientId = document.getElementById('clientId').value;
            
            if (!clientId) {
                showError('먼저 Client ID를 입력하고 저장해주세요.');
                return;
            }
            
            try {
                await gapi.load('auth2', function() {
                    gapi.auth2.init({
                        client_id: clientId
                    }).then(function() {
                        const authInstance = gapi.auth2.getAuthInstance();
                        return authInstance.signIn({
                            scope: 'https://www.googleapis.com/auth/forms.body https://www.googleapis.com/auth/forms'
                        });
                    }).then(function(user) {
                        handleSignIn(user);
                    });
                });
            } catch (error) {
                showError('로그인에 실패했습니다: ' + error.message);
            }
        }

        // 로그인 처리
        function handleSignIn(user) {
            isSignedIn = true;
            currentUser = user;
            
            const profile = user.getBasicProfile();
            document.getElementById('userName').textContent = profile.getName();
            document.getElementById('userEmail').textContent = profile.getEmail();
            document.getElementById('userPhoto').src = profile.getImageUrl();
            
            document.getElementById('loginSection').classList.add('hidden');
            document.getElementById('userInfo').classList.remove('hidden');
            
            showSuccess('로그인되었습니다!');
        }

        // 로그아웃
        function signOut() {
            if (gapi.auth2) {
                const authInstance = gapi.auth2.getAuthInstance();
                authInstance.signOut().then(function() {
                    isSignedIn = false;
                    currentUser = null;
                    
                    document.getElementById('loginSection').classList.remove('hidden');
                    document.getElementById('userInfo').classList.add('hidden');
                    
                    showSuccess('로그아웃되었습니다.');
                });
            }
        }

        // 구글 폼 생성
        async function generateForm() {
            if (!isSignedIn) {
                showError('먼저 Google 계정으로 로그인해주세요.');
                return;
            }
            
            const title = document.getElementById('formTitle').value || '새로운 설문조사';
            const description = document.getElementById('formDescription').value;
            const questionsText = document.getElementById('questions').value;
            
            if (!questionsText.trim()) {
                showError('질문을 입력해주세요.');
                return;
            }
            
            const questions = questionsText.split('\n').filter(q => q.trim());
            
            if (questions.length === 0) {
                showError('최소 하나의 질문을 입력해주세요.');
                return;
            }
            
            showLoading();
            
            try {
                await createGoogleForm(title, description, questions);
            } catch (error) {
                hideLoading();
                showError('폼 생성에 실패했습니다: ' + error.message);
            }
        }

        // Google Forms API를 사용한 폼 생성
        async function createGoogleForm(title, description, questions) {
            const apiKey = document.getElementById('apiKey').value;
            
            if (!apiKey) {
                throw new Error('API Key가 설정되지 않았습니다.');
            }
            
            // 실제 Google Forms API 호출 시뮬레이션
            // 실제 환경에서는 아래와 같이 API를 호출합니다
            
            setTimeout(() => {
                const mockFormId = 'mock_form_' + Date.now();
                const mockFormUrl = `https://docs.google.com/forms/d/${mockFormId}/viewform`;
                
                hideLoading();
                showResult(mockFormUrl, title, questions);
            }, 2000);
            
            /*
            // 실제 API 호출 코드 (참고용)
            const response = await gapi.client.request({
                path: 'https://forms.googleapis.com/v1/forms',
                method: 'POST',
                body: {
                    info: {
                        title: title,
                        description: description
                    }
                }
            });
            
            const formId = response.result.formId;
            
            // 질문 추가
            for (let i = 0; i < questions.length; i++) {
                await gapi.client.request({
                    path: `https://forms.googleapis.com/v1/forms/${formId}:batchUpdate`,
                    method: 'POST',
                    body: {
                        requests: [{
                            createItem: {
                                item: {
                                    title: questions[i],
                                    questionItem: {
                                        question: {
                                            textQuestion: {}
                                        }
                                    }
                                },
                                location: {
                                    index: i
                                }
                            }
                        }]
                    }
                });
            }
            
            const formUrl = `https://docs.google.com/forms/d/${formId}/viewform`;
            hideLoading();
            showResult(formUrl, title, questions);
            */
        }

        // 결과 표시
        function showResult(formUrl, title, questions) {
            document.getElementById('formLink').href = formUrl;
            document.getElementById('formLink').setAttribute('data-url', formUrl);
            
            const preview = document.getElementById('formPreview');
            preview.innerHTML = `
                <h3 class="text-lg font-semibold mb-3">폼 미리보기:</h3>
                <div class="border rounded-md p-4 bg-gray-50">
                    <h4 class="font-bold text-lg mb-2">${title}</h4>
                    <div class="space-y-2">
                        ${questions.map((q, i) => `
                            <div class="text-sm">
                                <span class="font-medium">${i + 1}. ${q}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            document.getElementById('resultSection').classList.remove('hidden');
        }

        // 링크 복사
        function copyLink() {
            const link = document.getElementById('formLink').getAttribute('data-url');
            navigator.clipboard.writeText(link).then(() => {
                showSuccess('링크가 클립보드에 복사되었습니다!');
            });
        }

        // 로딩 표시
        function showLoading() {
            document.getElementById('loadingSection').classList.remove('hidden');
            document.getElementById('resultSection').classList.add('hidden');
            document.getElementById('errorSection').classList.add('hidden');
        }

        // 로딩 숨김
        function hideLoading() {
            document.getElementById('loadingSection').classList.add('hidden');
        }

        // 성공 메시지
        function showSuccess(message) {
            const statusDiv = document.getElementById('connectionStatus');
            statusDiv.innerHTML = `<div class="text-green-600"><i class="fas fa-check-circle mr-2"></i>${message}</div>`;
            setTimeout(() => statusDiv.innerHTML = '', 3000);
        }

        // 오류 메시지
        function showError(message) {
            document.getElementById('errorMessage').textContent = message;
            document.getElementById('errorSection').classList.remove('hidden');
            setTimeout(() => {
                document.getElementById('errorSection').classList.add('hidden');
            }, 5000);
        }

        // 페이지 로드 시 저장된 설정 불러오기
        window.onload = function() {
            loadApiSettings();
        };
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDnmeRi%2BgJSEdTi8v3HRVLVTDfAr%2FP0851aFzklWpCNH6ndWodqM9GK6exRVeAxlAvKXVQPKf3SuwYRN3McYAwjrKuhQVBbNT1lT%2FMIvh10lZ0bLSGtiuPMJ7PMTP%2BjJf8ioDBdZxa7YPJs0GhM9v62vut4sDFXChplIXTDqgo3lakhGRZwe25HBUTtNX6o1qfEE381%2FELlRWbqaQLs%2F%2Fx7WjYBXT%2F9Yf23W%2FqAZ13LGVN4diqzYGGY4L3ffbRN9CknEkIUOkr%2FG1DDLGG7OFeGiD0sP7n1lYTNeQHPeApx3IVdIeHYWd8CF2dWlVqGiz1OIhWfaA6CTZOP2Ep4k5JlFFo44ttBa76UrHzHjWvtYp%2Fu33MFcm8PDry%2FWxPzYPfFMVymx2FKRtCIPM51Heh6vYtp5CmvZNvfEpJyChjVxhsFmLOu%2Fjl3SE3mKCINtR%2BWVnMP61Ft8TT0rYQZSUwVbCJBRFn0WpVMdebpSTd684GGViMVGZB1aC4mGq2zQLs%2FR1IA9z4Ek%2FRrRv02Rsdfk%3D";
        window.__genspark_locale = "ko-KR";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDnmeRi+gJSEdTi8v3HRVLVTDfAr/P0851aFzklWpCNH6ndWodqM9GK6exRVeAxlAvKXVQPKf3SuwYRN3McYAwjrKuhQVBbNT1lT/MIvh10lZ0bLSGtiuPMJ7PMTP+jJf8ioDBdZxa7YPJs0GhM9v62vut4sDFXChplIXTDqgo3lakhGRZwe25HBUTtNX6o1qfEE381/ELlRWbqaQLs//x7WjYBXT/9Yf23W/qAZ13LGVN4diqzYGGY4L3ffbRN9CknEkIUOkr/G1DDLGG7OFeGiD0sP7n1lYTNeQHPeApx3IVdIeHYWd8CF2dWlVqGiz1OIhWfaA6CTZOP2Ep4k5JlFFo44ttBa76UrHzHjWvtYp/u33MFcm8PDry/WxPzYPfFMVymx2FKRtCIPM51Heh6vYtp5CmvZNvfEpJyChjVxhsFmLOu/jl3SE3mKCINtR+WVnMP61Ft8TT0rYQZSUwVbCJBRFn0WpVMdebpSTd684GGViMVGZB1aC4mGq2zQLs/R1IA9z4Ek/RrRv02Rsdfk=";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    
